# REISD
This is code and data for paper "REISD: Detecting LLM-Generated Text via Iterative Semantic Difference".

## Brief Intro
### üöÄ Features
Supports both Chinese and English texts

Uses iterative rewriting via Ollama API (e.g., qwen2.5:7b)

Calculates BERTScore and MoverScore over rewrite chains

Classifies text using a pre-trained XGBoost model

Fully configurable input and model parameters

### üß© How It Works
Text Rewriting: Each input is rewritten twice via an LLM (e.g., Qwen 2.5) using language-specific instructions.

Semantic Similarity Analysis: Computes BERTScore and MoverScore between consecutive rewrites.

Feature Extraction: Derives six key features from semantic shifts.

Prediction: Classifies the text as AI- or human-written using an XGBoost binary classifier.
### In-Domain Experiments
Table: Precision (%) of Different Detection Methods Across Datasets

| Method            | CLTS  | XSUM  | SQuAD | GovReport | Billsum | HC3   |
|------------------|-------|-------|-------|-----------|---------|-------|
| Log-Likelihood   | 55.41 | 55.07 | 48.28 | 36.17     | 34.15   | 51.79 |
| Rank             | 52.21 | 56.61 | 41.57 | 42.44     | 37.03   | 48.31 |
| Log-Rank         | 50.37 | 56.42 | 47.64 | 36.93     | 35.79   | 49.98 |
| Entropy          | 59.35 | 52.31 | 43.78 | 31.54     | 42.64   | 54.64 |
| Fast-detectGPT   | 49.40 | 40.05 | 43.40 | 51.30     | 55.40   | 74.46 |
| bartscore        | 82.71 | 41.78 | 72.22 | 53.24     | 50.42   | 61.17 |
| Raidar           | 84.38 | 97.02 | 98.58 | 98.73     | 96.84   | 59.24 |
| **REISD (Ours)** | 85.93 | 95.23 | 96.58 | 95.34     | 93.23   | 81.20 |

### Out-of-Domain Experiments
Table: Precision (%) of Different Detection Methods on Texts Generated by Different LLMs

| Method    | CLTS (Claude3.7Sonnet) | CLTS (Gemini 2.0) | XSUM (Claude3.7Sonnet) | XSUM (Gemini 2.0) |
|-----------|------------------------|-------------------|------------------------|-------------------|
| BARTScore | 63.12                  | 66.42             | 74.16                  | 66.90             |
| raidar    | 66.00                  | 62.32             | 84.22                  | 66.02             |
| **REISD** | **76.24**              | **76.64**         | **83.96**              | **83.35**         |

## Experiments
### üõ† Dependencies
transformers

torch

scikit-learn

xgboost

numpy=2.1.3

ollama (Python API wrapper)
### üì¶ Installation
  # Install required packages
pip install -r requirements.txt

  # Download transformer models
python -c "from transformers import AutoTokenizer, AutoModel; AutoTokenizer.from_pretrained('hfl/chinese-roberta-wwm-ext'); AutoModel.from_pretrained('hfl/chinese-roberta-wwm-ext')"
### ‚öôÔ∏è Usage
* run train.py to validation the data reported in paper.
* `pos_train_files` and `pos_train_files` represent for human-written text and its LLM-rewritten version, `neg_train_files` and `neg_train_files` represent for LLM-Generated Text and its LLM-rewrited version.
* Change the feature in exclude_feature to valid the effectiveness of the ISD feature.
# üß† Local Demo
